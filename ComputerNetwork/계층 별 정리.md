# 1. 물리 계층

## 📌 물리 계층
- **물리 계층: 시스템 간의 물리적인 연결과 전기 신호를 변환 및 제어**

> 💡 물리 계층은 0과 1로 이루어진 **비트열을 전기 신호로 변환하기 위해** 필요하다.

- 랜 카드: 0과 1의 정보를 전기 신호로 변환.
    - 0과 1의 정보 -> 랜 카드로 전송 -> 랜카드는 0과 1을 전기신호로 변환

- 전기 신호는 **디지털 신호**와 **아날로그 신호**가 있다.


## 📌 트위스트 페어 케이블(=LAN Cable, 랜 선)

- 네트워크 전송 매체: 데이터가 흐르는 물리적인 선로
    - 유선: 트위스트 페어 케이블, 광케이블..
    
    - 무선: 라디오파, 마이크로파, 적외선..

- **트위스트 페어 케이블: 8개의 구리선을 두 개씩 꼬아 만든 네 쌍의 전선**
    - UTP: Unshielded 트위스트 페어(비차페 연선)
    - STP: Shielded 트위스트 페어(차폐 연선)
> 💡 노이즈는 케이블에 전기 신호가 흐를 때 발생하며, Shield는 이러한  노이즈를 막는 역할을 한다. 구리선을 꼬아서 케이블을 만드는 이유 또한 노이즈를 막기 위함이다.

- 랜 케이블의 양쪽 끝에는 기기를 연결하기 위한 **RJ-45 커넥터**가 붙어 있다.

- Direct Cable & Cross Cable
    - Direct Cable: 구리 선 여덟 개를 같은 순서로 커넥터에 연결한 케이블
        - 1번 -> 1, 2번 -> 2
        - 3번 <- 3, 6번 <- 6
        - 컴퓨터와 스위치를 연결할 때 사용
    - Cross Cable: 구리 선 여덟 개 중 1번과 2번에 연결되는 구리 선을 다른 쪽 커넥터의 3번과 6번에 연결한 케이블
        - 1번 -> 3번, 2번 -> 6번
        - 3번 <- 1번, 6번 <- 2번 
        - 컴퓨터 간 직접 랜 케이블로 연결할 때 사용
> 💡Cross Cable 같은 경우 구리 선을 교차시킨 이유는 양쪽 컴퓨터 간 데이터 충돌을 방지하고 송/수신이 원활하도록 하기 위함이다.


## 📌 물리 계층에서 동작하는 리피터와 허브

- 리피터: 네트워크를 중계하기 위한 장비
    - 전기 신호를 복원하는 기능
    - 약해진 전기 신호를 증폭하는 기능
> 💡 오늘날 네트워크 장비가 리피터 기능을 지원하기 때문에 리피터를 잘 쓰지 않는다.

- 허브: 포트를 여러 개 갖고 있는 장비
    - 리피터 허브라고도 함
    - 리피터와 같이 전기 신호를 정형하고 증폭하는 기능을 갖고 있다.
    - 리피터는 1:1 통신만 가능하지만 허브는 포트가 여러개 있기 때문에 컴퓨터 여러 대와 통신할 수 있다.
> 💡허브는 컴퓨터 여러 대를 서로 연결하는 장치이기도 하지만, 특정 포트로부터 데이터를 받을 때 나머지 포트로도 데이터가 전송된다는 단점이 있으며, 이러한 이유로 **더미 허브**라고도 불린다.<br>
이를 해결하기 위한 장비로 **스위치**가 있다.

<br>

---

<br>

# 2. 데이터 링크 계층

## 📌 데이터 링크 계층

- 데이터 링크 계층: 네트워크 장비 간 신호를 주고 받는 규칙을 정하는 계층
    - **LAN에서 데이터를 주고 받기 위해 필요한 계층**
    - 일반적으로 가장 많이 사용되는 규칙이 **이더넷**이다.
    
- 이더넷: LAN에서 데이터를 정상적으로 주고 받기 위한 규칙.
    - 이더넷은 데이터 충돌을 막기 위한 규칙으로 CSMA/CD 방식을 사용한다.
    - 즉, 케이블에 데이터가 흐르고 있지 않으면 데이터를 보내고, 충돌이 발생하고 있는지 확인한다.
    - 하지만 오늘날 CSMA/CD 방식을 거의 사용하지 않고 **네트워크 장비인 스위치**를 사용한다.
 
> 💡 이더넷은 네트워크에 연결된 각 기기들이 48비트 길이의 고유의 MAC 주소를 가지고 이 주소를 이용해 상호간에 데이터를 주고 받을 수 있도록 만들어졌다. 전송 매체로는 BNC 케이블 또는 UTP, STP 케이블을 사용하며, 각 기기를 상호 연결시키는 데에는 허브, 네트워크 스위치, 리피터 등의 장치를 이용한다. <br> 참고: [위키백과 - 이더넷](https://ko.wikipedia.org/wiki/%EC%9D%B4%EB%8D%94%EB%84%B7)


## 📌 MAC 주소

- MAC (Media Access Control Address) = 물리주소
    - 랜 카드를 제조할 때 새기는 주소로, 전 세계에서 유일한 번호로 할당되어 있다.
    - 48bit(=6byte)로 구성되어 있는 주소다.
        - 24bit(=3byte): 제조사 번호
        - 24bit(=3byte): 제조사가 붙인 일련 번호

<p align="center">
<img src="https://user-images.githubusercontent.com/84573261/175815394-a944ecb1-a182-4c1e-b125-771dd0dec464.jpg" width="700" height="500" />
</p>


> 💡 ARP(Address Resolution Protocol): 목적지 컴퓨터의 ip 주소를 이용하여 MAC 주소를 찾기 위한 프로토콜. <br>
ARP request: 출발지 컴퓨터가 목적지 MAC 주소를 알아내기 위해 네트워크에 브로드캐스트<br>
ARP reply: 지정된 ip 주소를 가진 컴퓨터(목적지 컴퓨터 ip 주소)가 MAC 주소를 응답으로 보냄<br>
ARP Table: (출발지 컴퓨터가) MAC 주소를 얻은 후 **MAC 주소 + IP 주소의 매핑 정보**를 메모리에 보관하는데, 이 정보를 ARP 테이블이라 함.
    

## 📌 스위치

- Switch: 허브와 같이 포트를 여러 개 갖고 있는 장비로, 데이터 링크 계층에서 동작한다. 
    - **허브와 달리 데이터 충돌이 발생하지 않으며 허브보다 전송 속도가 향상된 장비이다.**
    - 스위치 = 레이어 2 스위치 = 스위칭 허브
    - **스위치의 가장 큰 특징은 내부에 MAC 주소 테이블이 있다는 것이다.**

- MAC 주소 테이블
    1. MAC 주소 테이블에는 **스위치 포트 번호 + MAC 주소**로 이루어져 있다.
    2. 초기 스위치의 MAC 주소 테이블에는 아무 것도 등록되어 있지 않음.
    3. 프레임(헤더+데이터+트레일러)이 전송되면 출발지 MAC 주소+포트 번호를 MAC 주소 테이블에 저장 (=**MAC 주소 학습 기능**)
    4. 프레임에 들어 있는 목적지 MAC 주소가 MAC 주소 테이블에 저장되어 있지 않다면, 목적지 포트 외에 다른 포트로도 프레임이 전송된다. (=**플러딩**)
    5. 프레임에 들어 있는 목적지 MAC 주소가 MAC 주소 테이블에 저장되어 있다면, 목적지 포트에만 프레임이 전송된다. (=**MAC 주소 필터링**)

<p align="center">
<img src="https://user-images.githubusercontent.com/84573261/175815631-6548129b-bb9b-4a09-b4d3-63036656ec83.jpg" width="700" height="500" />
</p>

- 허브의 **반이중 통신 방식** VS 스위치의 **전이중 통신 방식**
    - 반이중 통신: 회선 하나로 송,수신을 번갈아가면서 통신하는 방식
        - 반이중 통신은 회선 하나로 송,수신을 번갈아가며 사용하기 때문에 데이터를 동시에 전송하면 충돌이 발생한다.
        - 즉, 허브를 사용하면 충돌로 인해 네트워크 지연이 발생하기 때문에 오늘날 대부분 스위치를 사용한다.
        - 충돌이 발생할 때 충돌의 영향이 미치는 범위를 **충돌 도메인**이라 하는데, **허브로 연결되어 있는 컴퓨터 전체가 충돌 도메인이 되기 때문에** 충돌 도메인의 범위가 넓다.(즉, 네트워크 지연이 ↑)
    - 전이중 통신: 데이터의 송,수신을 동시에 통신하는 방식


---

참고: [모두의 네트워크](http://www.yes24.com/Product/Goods/61794014)
